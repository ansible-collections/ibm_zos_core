# Copyright (c) IBM Corporation 2020, 2025
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#     http://www.apache.org/licenses/LICENSE-2.0
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

DOCUMENTATION = r"""
role: job_status
short_description: Role that queries a job to extract its current status and determine its execution state.
description:
    - >
      The B(IBM z/OS core collection) provides an Ansible role, referred to as
      B(job_status), to query a particular job with a given job_id and parse the response
      to return as a msg the job status and if the job is currently running or not.
author:
    - Marcel Gutierrez (@AndreMarcel99)
options:
    job_id:
        description:
            - The job id that has been assigned to the job.
            - A job id must begin with `STC`, `JOB`, `TSU` and are
              followed by up to 5 digits.
            - When a job id is greater than 99,999, the job id format will begin
              with `S`, `J`, `T` and are followed by 7 digits.
        required: True
        type: str
notes:
    - >
      The role tolerate the asterisk (`*`) as wildcard but only retrieve information from
      the first job returned that math the patter.
"""

EXAMPLES = r"""
- name: Query the job status and if is running of the job STC00001
  hosts: sampleHost
  gather_facts: no
  collections:
    - ibm.ibm_zos_core
  tasks:
    - include_role:
        name: job_status
      vars:
        job_id: STC00001

"""

# Roles don't return anything.
# But RETURN block must be defined for doc extraction tooling to avoid error.
# The content in RETURN block will not be display in doc-site.
RETURN = r"""
changed:
    description: Indicates if any change is made during the role operation.
    returned: always
    type: bool
msg:
    description: Two variables that contain the information return by the role.
    returned: always
    type: dict
    contains:
        job_active:
            description: Boolean value that return if the job is running.
            returned: always
            type: bool
        job_status:
            description: Value of the current status of the job.
            returned:
            type: str
"""